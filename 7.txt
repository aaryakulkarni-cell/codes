Database Trigger (All Types: Row level and Statement level triggers, Before and After 
Triggers). 
Write a database trigger on Library table. The System should keep track of the records that are 
being updated or deleted. The old value of updated or deleted records should be added in 
Library_Audit table. 
Note: Instructor will Frame the problem statement for writing PL/SQL block for all types of 
Triggers in line with above statement. 

Trigger - 

-- Create database
CREATE DATABASE library_db;
USE library_db;

-- Create main library table
CREATE TABLE Library (
    BookID INT PRIMARY KEY,
    BookName VARCHAR(50),
    Author VARCHAR(50),
    Price DECIMAL(10,2)
);

-- Create audit table to track changes
CREATE TABLE Library_Audit (
    BookID INT,
    BookName VARCHAR(50),
    Author VARCHAR(50),
    Price DECIMAL(10,2),
    Action VARCHAR(20),
    Action_Date DATE
);

-- Create trigger for audit tracking
DROP TRIGGER IF EXISTS trg_library_audit;

DELIMITER //

CREATE TRIGGER trg_library_audit
BEFORE DELETE ON Library
FOR EACH ROW
BEGIN
    INSERT INTO Library_Audit
    VALUES (OLD.BookID, OLD.BookName, OLD.Author, OLD.Price, 'DELETE', CURDATE());
END//

CREATE TRIGGER trg_library_update
BEFORE UPDATE ON Library
FOR EACH ROW
BEGIN
    INSERT INTO Library_Audit
    VALUES (OLD.BookID, OLD.BookName, OLD.Author, OLD.Price, 'UPDATE', CURDATE());
END//

DELIMITER ;

-- Insert sample data
INSERT INTO Library VALUES (1, 'DBMS', 'Navathe', 500);
INSERT INTO Library VALUES (2, 'Operating System', 'Galvin', 600);
INSERT INTO Library VALUES (3, 'Data Structures', 'Lipschutz', 400);

-- Test the triggers
UPDATE Library SET Price = 550 WHERE BookID = 1;
DELETE FROM Library WHERE BookID = 2;

-- Show results
SELECT * FROM Library;
SELECT * FROM Library_Audit;